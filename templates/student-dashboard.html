{% extends "base.html" %}
{% load static %}
{% block extra_links %}
{% endblock %}
{% block content %}
      <main>
        {% include "stunav.html" %}
        {% if messages %}
        <div id="message-container">
            {% for message in messages %}
            <h5 class="text-center text-danger">{{ message | safe }}</h5>
            {% endfor %}
        </div>
        {% endif %}
            <div class="row">
              {% if content %}
              <div class="col-sm-10 mx-auto mt-5 mb-5" id="boxes" style="box-shadow: 5px 10px 25px #000; padding: 30px; width: 90%; margin:auto; border-radius: 10px;">
                <h2 class="text-center">Contents</h2>
                <div class="table-responsive">
                <table class="table table-striped table-bordered" style="border: black;">
                  <thead>
                    <tr class="text-center">
                      <th scope="col" style="background-color: #9DC3E6;">SR. No.</th>
                      <th scope="col" style="background-color: #9DC3E6;">Title</th>
                      <th scope="col" style="background-color: #9DC3E6;">Content Type</th>
                      <th scope="col" style="background-color: #9DC3E6;">Discription</th>
                      <th scope="col" style="background-color: #9DC3E6;">Teacher</th>
                      <th scope="col" style="background-color: #9DC3E6;" colspan="2">Action</th>
                    </tr>
                  </thead>
                  <tbody>                           
                      {% for n in content %}
                      <tr id="row-{{ n.id }}">
                          <form method="post" enctype="multipart/form-data" action="{% url 'update_content' n.id %}">
                          {% csrf_token %}
                          <input type="hidden" name="form_type" value="update">
                          <th scope="row" class="text-center">{{ forloop.counter }}</th>

                          <!-- Title -->
                          <td class="text-center">
                              <span class="view-mode">{{ n.content_title }}</span>
                              <input type="text" name="title" value="{{ n.content_title }}" class="edit-mode" style="display:none; width: 100%; height: 1cm; border: none;">
                          </td>

                          <!-- Type -->
                          <td class="text-center">
                              <span class="view-mode">{{ n.content_type }}</span>
                              <select name="type" class="edit-mode" style="display:none; width: 100%; height: 1cm; border: none;">
                                  <option value="Notes" {% if n.content_type == "Notes" %}selected{% endif %}>Notes</option>
                                  <option value="Assignment" {% if n.content_type == "Assignment" %}selected{% endif %}>Assignment</option>
                                  <option value="Lecture" {% if n.content_type == "Lecture" %}selected{% endif %}>Lecture</option>
                              </select>
                          </td>

                          <!-- Description -->
                          <td>
                              <span class="view-mode">{{ n.content_desc }}</span>
                              <textarea name="description" class="edit-mode" style="display:none; width: 100%; height: 1cm; border: none; resize:none;">{{ n.content_desc }}</textarea>
                          </td>

                          <!-- teacher -->
                           <td class="text-center">
                            <span class="view-mode">{{ n.teacher }}</span>
                           </td>

                            <!-- Actions -->
                            {% if n.content_file %}
                                <td class="text-center">
                                    <a href="{{ n.content_file.url }}" target="_blank" class="btn btn-primary">View</a>
                                </td>
                                <td class="text-center">
                                    <a href="{{ n.content_file.url }}" download class="btn btn-success">Download</a>
                                </td>
                            {% else %}
                                <td colspan="2" class="text-center">
                                    <a href="{{ n.content_link }}" target="_blank" class="btn btn-primary">Open URL</a>
                                </td>
                            {% endif %}
                          </form>
                      </tr>
                      {% endfor %}
                  </tbody>
                </table>
                </div>
              </div>
              {% endif %}
            </div>
      </main>
{% endblock %}